<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
  <head>
    <meta http-equiv="content-language" content="ru">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>ui-dev</title>

    <link rel="stylesheet" type="text/css" href="styles/ui.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/button.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/entry.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/text.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/grid.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/spinbutton.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/list.css">
    <link rel="stylesheet" type="text/css" href="styles/widgets/combobox.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/popup.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/viewport.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/window.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/groupbox.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/collapsebox.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/panelbox.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/scrolledarea.css">
    <link rel="stylesheet" type="text/css" href="styles/elem/panel.css">

    <script type="text/javascript" src="src/jquery/jquery.js"></script>
    <script type="text/javascript" src="src/jquery/disable.text.select.js"></script>
<!--    <script type="text/javascript" src="src/jquery/rightClick.js"></script>
    <script type="text/javascript" src="src/jquery/corner.js"></script>-->

    <script type="text/javascript" src="src/core/Events.js"></script>
    <script type="text/javascript" src="src/core/DOMCore.js"></script>
    <script type="text/javascript" src="src/core/builtin.js"></script>

    <script type="text/javascript" src="src/core/Core.js"></script>
    <script type="text/javascript" src="src/core/proto/UIObject.js"></script>
    <script type="text/javascript" src="src/core/proto/UIMovable.js"></script>
    <script type="text/javascript" src="src/core/proto/UIResizable.js"></script>
    <script type="text/javascript" src="src/core/proto/UIPopup.js"></script>
    <script type="text/javascript" src="src/core/IObject.js"></script>
    <script type="text/javascript" src="src/core/IEventProxy.js"></script>
    <script type="text/javascript" src="src/core/IContainer.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIUtil.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIObject.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIManager.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIDragProvider.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIMovable.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIResizable.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIPopup.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIWidget.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIContainer.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIAbstractList.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIZIndex.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIWindowManager.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIAbstractGroup.js"></script>
    <script type="text/javascript" src="src/ui/intern/UIAbstractCollapse.js"></script>

    <script type="text/javascript" src="src/ui/widgets/UIButton.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UIEntry.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UIText.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UIGrid.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UISpinButton.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UIList.js"></script>
    <script type="text/javascript" src="src/ui/widgets/UIComboBox.js"></script>

    <script type="text/javascript" src="src/ui/elem/UIViewport.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIViewportPanel.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIViewportItem.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIWindow.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIGroupBox.js"></script>
    <script type="text/javascript" src="src/ui/elem/UICollapseBox.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIPanelBox.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIScrolledArea.js"></script>
    <script type="text/javascript" src="src/ui/elem/UIPanel.js"></script>
  </head>

  <body>
<!--<p>
      text text text text text text<br>
      text text text text text text<br>
      text text text text text text<br>
      text text text text text text
    </p>
    <div id="myDiv" style="position: relative; background: red; width: 100px; padding: 2px;">
      <div id="myDiv2" style="background: blue; cursor: pointer;">
        title
      </div>
      text text text text text text
      <div id="myDiv5" style="background: green; width: 10px; height: 10px; position: absolute; bottom: 0px; right: 0px; cursor: se-resize;"></div>
    </div>

    <div id="myDiv3" style="position: relative; background: green; width: 100px; padding: 2px;">
      <div id="myDiv4" style="background: blue; width: 100px; cursor: pointer;">
        title
      </div>
      text text text text text text
    </div>
-->
    <div class="UIPopup" style="width: 250px;">
      <div id="popupSizer" class="UIPopupSizer"></div>
    </div>

    <div class="UIPopup" style="width: 100px;">
      text text text text text text
    </div>

    <script type="text/javascript">
      /*UI_MakeMovable ($('#myDiv')[0], {'moveArea': $('#myDiv2')[0]});
      UI_MakeMovable ($('#myDiv3')[0], {'moveArea': $('#myDiv4')[0]});

      UI_MakeResizable ($('#myDiv')[0], {'resizeArea': $('#myDiv5')[0]});*/
      UI_MakeResizable ($('.UIPopup')[0], {'resizeArea': $('#popupSizer')[0]});

/*      uiManager.registerContext ($('#myDiv')[0]);
      uiManager.registerContext ($('#myDiv3')[0]);*/
      uiManager.registerContext ($('.UIPopup')[0]);

      var viewport = new UIViewport();
      var vp = viewport.build ();
      document.body.insertBefore (vp, $('.UIPopup')[0]);
      viewport.addPanel (VP_PANEL_BOTTOM);
      viewport.addItem ('./pics/ico/blender.png', 'Blender', function () {
          if (isUnknown (window.__testWnd)) {
            var wnd = new UIWindow ({'caption': 'Тестовое окно',
                                     'top': 16,
                                     'left': 16});
            var btn = new UIButton ({'title': 'Спрятать окно',
                                     'click': function (wnd) { return function () {
                                               wnd.hide ();
                                            }
                                          } (wnd)
                                     });

            var hBtn = new UIButton ({'title': 'Кнопка',
                                      'image' : 'pics/buttons/search.gif'});
            hBtn.width = '100';
            var hBtnBlock = new UIButton ({'title': 'Ещё кнопка',
                                           'image' : 'pics/buttons/camera.gif'});
            hBtnBlock.block = true;
            var items = [hBtn, hBtnBlock];
            var groupBox = new UIPanelBox ({'title'    : 'Тестовая группа',
                                            'collapsed': false,
                                            'animated' : true});
            var groupBox2 = new UIPanelBox ({'title'    : 'Группа 2',
                                             'collapsed': true,
                                             'animated' : true});

            var grid = new UIGrid ({'rows': 2, 'cols': 1, 'padding': 2});

            grid.add (btn);

            var img = 'pics/buttons/camera.gif';
            var btn = new UIButton ({'title': 'Поменять заголовок',
                                     'image': img});

            btn.onClick = function (groupBox) {return function () {
                    groupBox.setTitle ('New title');
                  };
                } (groupBox);

            grid.add (btn);

            var combobox = new UIComboBox ({'items': ['item 0', 'item 1', 'item 2']});

            var grid2 = new UIGrid ({'rows': 3, 'cols': 1, 'padding': 2});
            grid2.add (combobox);
            grid2.add (hBtn);
            grid2.add (hBtnBlock);

            var spin = new UISpinButton ({'image' : 'pics/buttons/camera.gif',
              'min'   : 0,
              'max'   : 16});
            groupBox.add (grid);
            groupBox2.add (grid2);
            grid2.add (spin);

            var header = new UIGrid ({'rows': 1, 'cols': 2, 'padding': 2});
            header.add (new UIButton ({'title': 'Pinned button'}));
            header.add (new UISpinButton ());
            header.height = 18;

            var panel = new UIPanel ({'header' : header});
            panel.add (groupBox);
            panel.add (groupBox2);
            wnd.add (panel);

            window.__testWnd = wnd;
          }
          window.__testWnd.show ();
        });
      viewport.addItem ('./pics/ico/gnome-cd.png', 'Media player', function () {alert ('Click on player');});

      var cnt = $('.UIPopup')[0];

      var grid = new UIGrid ({'rows': 6,
                              'cols': 2,
                              'padding': 2});

      grid.setCellStyle (1, 0, {'colspan': 2});
      grid.setCellStyle (2, 0, {'colspan': 2});
      grid.setCellStyle (3, 0, {'colspan': 2});
      grid.setCellStyle (4, 0, {'colspan': 2});
      grid.setCellStyle (5, 0, {'colspan': 2});

      var imgs = ['camera', 'config' ]
      var buttons = [];
      for (var i =0; i < 2; ++i)
        {
          var img = imgs[i] ? ('pics/buttons/' + imgs[i] + '.gif') : null;
          buttons[i] = new UIButton ({'title': 'Нажми меня ' + (i + 1),
                                      'image': img
                                      });
          grid.add (buttons[i]);
        }

      var entry = new UIEntry ({'text'  : 'Hi!',
                                'image' : 'pics/buttons/search.gif'});
      grid.add (entry);

      var text = new UIText ({'text'       : 'Hi!',
                              'autoexpand' : true,
                              'sensitive'  : true});
      grid.add (text);

      var combobox = new UIComboBox ({'items': ['item 0', 'item 1', 'item 2']});
      combobox.add ('Test');
      combobox.remove ('item 1');
      combobox.setActiveIndex (1);
      grid.add (combobox);


      var list = new UIList ({'height': 100});
      for (var i = 0; i < 13; ++i)
        {
          list.add ('Item ' + (i + 1));
        }
      grid.add (list);

      var spin = new UISpinButton ({'image'      : 'pics/buttons/camera.gif',
                                    'min': 0,
                                    'max': 4});
      grid.add (spin);

      cnt.appendChild (grid.build ());

      buttons[0].onClick = function (entry) {return function (){
            entry.setText ('Hi, Ky3bMu4');
          }
        } (entry);

      buttons[1].onClick = function (button) {return function (){
            button.setSensitive (!button.getSensitive ());
          }
        } (buttons[0]);

      list.onItemSelected = function (spin) {return function (itemIndex){
            spin.setValue (itemIndex);
          }
        } (spin);

      spin.onValueChanged = function (list) {return function (newValue){
            list.setActiveIndex (Math.floor (newValue));
          }
        } (list);

      uiManager.addHandler ('click', function (userData) {
           var e = userData['domEvent'];
           uiPopupManager.popup ($('.UIPopup')[1], {'x': e.pageX,
                                                    'y': e.pageY});
        }, {'affectContext': $('.UIPopup')[0]});

      uiManager.addHandler ('click', function (userData) {
          if (userData['context'] == document)
            {
              var e = userData['domEvent'];
              uiPopupManager.popup ($('.UIPopup')[0], {'x': e.pageX,
                                                       'y': e.pageY});
            }
        });
    </script>
  </body>
</html>
